{"version":3,"file":"static/js/135.926c675f.chunk.js","mappings":"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","sources":["module/user/UserAddNew.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport DashboardHeading from \"../dashboard/DashboardHeading\";\r\nimport Field from \"../../components/field/Field\";\r\nimport Label from \"../../components/label/Label\";\r\nimport Input from \"../../components/input/Input\";\r\nimport Radio from \"../../components/checkbox/Radio\";\r\nimport Button from \"../../components/button/Button\";\r\nimport FieldCheckboxes from \"../../components/field/FieldCheckboxes\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport ImageUpload from \"../../components/image/ImageUpload\";\r\nimport { createUserWithEmailAndPassword, updateProfile } from \"firebase/auth\";\r\nimport { userRole, userStatus } from \"../../utils/constants\";\r\nimport useFireBaseImage from \"../../hooks/useFireBaseImage\";\r\nimport { auth, db } from \"../../firebase-app/firebase-config\";\r\nimport {\r\n  addDoc,\r\n  collection,\r\n  serverTimestamp,\r\n  setDoc,\r\n} from \"firebase/firestore\";\r\nimport slugify from \"slugify\";\r\nimport { toast } from \"react-toastify\";\r\nimport InputPasswordToggle from \"../../components/input/InputPasswordToggle\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Textarea from \"../../components/textarea/Textarea\";\r\nimport { useAuth } from \"../../contexts/auth-context\";\r\nconst UserAddNew = () => {\r\n  const {\r\n    control,\r\n    handleSubmit,\r\n    setValue,\r\n    watch,\r\n    getValues,\r\n    formState: { isValid, isSubmitting },\r\n    reset,\r\n  } = useForm({\r\n    mode: \"onChange\",\r\n    defaultValues: {\r\n      fullname: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n      username: \"\",\r\n      avatar: \"\",\r\n      imageName: \"\",\r\n      description: \"\",\r\n      status: userStatus.ACTIVE,\r\n      role: userRole.USER,\r\n      createdAt: new Date(),\r\n    },\r\n  });\r\n  const [inputValue, setInputValue] = useState(\"\");\r\n  const [outputValue, setOutputValue] = useState(\"\");\r\n  const watchStatus = watch(\"status\");\r\n  const watchRole = watch(\"role\");\r\n  const navigate = useNavigate();\r\n  const {\r\n    handleSelectImage,\r\n    setImage,\r\n    setProgress,\r\n    handleDeleteImage,\r\n    progress,\r\n    image,\r\n    imageName,\r\n  } = useFireBaseImage(setValue, getValues);\r\n\r\n  // console.log(\"imageName: \" + imageName);\r\n  const { userInfo } = useAuth();\r\n  if (userInfo.role !== userRole.ADMIN)\r\n    return (\r\n      <div className=\"text-[30px] font-semibold text-green-500 \">\r\n        This page is for admins only\r\n      </div>\r\n    );\r\n\r\n  const handleCreateUser = async (values) => {\r\n    if (!isValid) return;\r\n\r\n    try {\r\n      await createUserWithEmailAndPassword(auth, values.email, values.password);\r\n\r\n      await updateProfile(auth.currentUser, {\r\n        displayName: values.fullname,\r\n      });\r\n\r\n      await addDoc(collection(db, \"users\"), {\r\n        fullname: values.fullname,\r\n        email: values.email,\r\n        password: values.password,\r\n        username: slugify(values.username || values.fullname, {\r\n          lower: true,\r\n        }),\r\n        avatar: image,\r\n        imageName: imageName,\r\n        description: values.description,\r\n        status: values.status,\r\n        role: values.role,\r\n        createdAt: serverTimestamp(),\r\n      });\r\n\r\n      setImage(\"\");\r\n      setProgress(0);\r\n      toast.success(\"Create User successfully \");\r\n      navigate(\"/manage/user\");\r\n      reset({\r\n        fullname: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n        username: \"\",\r\n        avatar: \"\",\r\n        imageName: \"\",\r\n        description: \"\",\r\n        status: userStatus.ACTIVE,\r\n        role: userRole.USER,\r\n        createdAt: new Date(),\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n      toast.error(\"Can't create User\");\r\n    }\r\n  };\r\n\r\n  // const { userInfo } = useAuth();\r\n  // if (userInfo.role !== userRole.ADMIN) return navigate(\"/\");\r\n  return (\r\n    <div>\r\n      <DashboardHeading\r\n        title=\"New user\"\r\n        desc=\"Add new user to system\"\r\n      ></DashboardHeading>\r\n      <form onSubmit={handleSubmit(handleCreateUser)}>\r\n        <div className=\"w-[200px] h-[200px] mx-auto mb-10 \">\r\n          <ImageUpload\r\n            className=\"!rounded-full h-full\"\r\n            onChange={handleSelectImage}\r\n            handleDeleteImage={handleDeleteImage}\r\n            progress={progress}\r\n            image={image}\r\n          ></ImageUpload>\r\n        </div>\r\n        <div className=\"form-layout\">\r\n          <Field>\r\n            <Label>Fullname</Label>\r\n            <Input\r\n              name=\"fullname\"\r\n              placeholder=\"Enter your fullname\"\r\n              control={control}\r\n            ></Input>\r\n          </Field>\r\n          <Field>\r\n            <Label>Username</Label>\r\n            <Input\r\n              name=\"username\"\r\n              placeholder=\"Enter your username\"\r\n              control={control}\r\n            ></Input>\r\n          </Field>\r\n        </div>\r\n        <div className=\"form-layout\">\r\n          <Field>\r\n            <Label>Email</Label>\r\n            <Input\r\n              name=\"email\"\r\n              placeholder=\"Enter your email\"\r\n              control={control}\r\n              type=\"email\"\r\n            ></Input>\r\n          </Field>\r\n          <Field>\r\n            <Label>Password</Label>\r\n            {/* <Input\r\n              name=\"password\"\r\n              placeholder=\"Enter your password\"\r\n              control={control}\r\n              type=\"password\"\r\n            ></Input> */}\r\n            <InputPasswordToggle control={control}></InputPasswordToggle>\r\n          </Field>\r\n        </div>\r\n        <div className=\"form-layout\">\r\n          <Field>\r\n            <Label>Status</Label>\r\n            <FieldCheckboxes>\r\n              <Radio\r\n                name=\"status\"\r\n                control={control}\r\n                checked={Number(watchStatus) === userStatus.ACTIVE}\r\n                value={userStatus.ACTIVE}\r\n              >\r\n                Active\r\n              </Radio>\r\n              <Radio\r\n                name=\"status\"\r\n                control={control}\r\n                checked={Number(watchStatus) === userStatus.PENDING}\r\n                value={userStatus.PENDING}\r\n              >\r\n                Pending\r\n              </Radio>\r\n              <Radio\r\n                name=\"status\"\r\n                control={control}\r\n                checked={Number(watchStatus) === userStatus.BAN}\r\n                value={userStatus.BAN}\r\n              >\r\n                Banned\r\n              </Radio>\r\n            </FieldCheckboxes>\r\n          </Field>\r\n          <Field>\r\n            <Label>Role</Label>\r\n            <FieldCheckboxes>\r\n              <Radio\r\n                name=\"role\"\r\n                control={control}\r\n                checked={Number(watchRole) === userRole.ADMIN}\r\n                value={userRole.ADMIN}\r\n              >\r\n                Admin\r\n              </Radio>\r\n              <Radio\r\n                name=\"role\"\r\n                control={control}\r\n                checked={Number(watchRole) === userRole.MOD}\r\n                value={userRole.MOD}\r\n              >\r\n                Moderator\r\n              </Radio>\r\n\r\n              <Radio\r\n                name=\"role\"\r\n                control={control}\r\n                checked={Number(watchRole) === userRole.USER}\r\n                value={userRole.USER}\r\n              >\r\n                User\r\n              </Radio>\r\n            </FieldCheckboxes>\r\n          </Field>\r\n          <Field>\r\n            <Label>Description</Label>\r\n            <Textarea name=\"description\" control={control}></Textarea>\r\n          </Field>\r\n        </div>\r\n\r\n        <div className=\"gap-x-5 flex justify-center\">\r\n          <div>\r\n            <Button\r\n              kind=\"primary\"\r\n              className=\"mx-auto w-[200px]\"\r\n              isLoading={isSubmitting}\r\n              disabled={isSubmitting}\r\n              type=\"submit\"\r\n            >\r\n              Add new user\r\n            </Button>\r\n          </div>\r\n\r\n          <div>\r\n            <Button\r\n              to=\"/manage/user\"\r\n              className=\"mx-auto w-[100px] sm:w-[200px] md:w-[200px] lg:w-[200px]  \"\r\n              kind=\"ghost\"\r\n              type=\"submit\"\r\n            >\r\n              Back\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserAddNew;\r\n"],"names":["useForm","mode","defaultValues","fullname","email","password","username","avatar","imageName","description","status","userStatus","role","userRole","createdAt","Date","control","handleSubmit","setValue","watch","getValues","formState","isValid","isSubmitting","reset","useState","watchStatus","watchRole","navigate","useNavigate","useFireBaseImage","handleSelectImage","setImage","setProgress","handleDeleteImage","progress","image","useAuth","userInfo","className","handleCreateUser","values","createUserWithEmailAndPassword","auth","updateProfile","displayName","addDoc","collection","db","slugify","lower","serverTimestamp","toast","console","log","title","desc","onSubmit","onChange","name","placeholder","type","checked","Number","value","kind","isLoading","disabled","to"],"sourceRoot":""}