"use strict";(self.webpackChunkreact_monkey_blogging_boilerplate=self.webpackChunkreact_monkey_blogging_boilerplate||[]).push([[472],{5472:function(e,t,s){s.r(t);var n,r=s(1413),a=s(5861),c=s(9439),i=s(168),l=s(7757),o=s.n(l),u=s(2791),d=s(6031),m=s(6356),h=s(3453),x=s(9248),g=s(6024),f=s(460),p=s(8119),Z=s(5421),j=s(1134),b=s(333),v=s.n(b),w=s(3585),k=s(3031),y=s(4490),N=s(4961),E=s(9062),P=s(1199),C=s(5727),I=s(4170),S=s(9808),A=s(577),D=s(6871),J=s(6770),_=s.n(J),R=(s(6009),s(184)),T=d.ZP.div(n||(n=(0,i.Z)([""])));t.default=function(){var e=(0,S.a)().userInfo,t=(0,u.useState)(""),s=(0,c.Z)(t,2),n=s[0],i=s[1],l=(0,j.cI)({mode:"onChange",defaultValues:{title:"",slug:"",status:2,category:{},hot:!1,user:{},content:""}}),d=l.control,b=l.watch,J=l.setValue,V=l.handleSubmit,O=l.getValues,L=l.reset,G=(l.formState.errors,(0,y.Z)(J,O)),M=G.handleSelectImage,q=G.setImage,B=G.setProgress,F=G.handleDeleteImage,Q=G.progress,U=G.image,z=G.imageName,H=b("status"),K=b("hot"),W=(b("category"),(0,D.s0)());(0,u.useEffect)((function(){function t(){return(t=(0,a.Z)(o().mark((function t(){var s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.email){t.next=2;break}return t.abrupt("return");case 2:return s=(0,E.IO)((0,E.hJ)(P.db,"users"),(0,E.ar)("email","==",e.email)),t.next=5,(0,E.PL)(s);case 5:t.sent.forEach((function(e){J("user",(0,r.Z)({id:e.id},e.data()))}));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.email]);var X=function(){var e=(0,a.Z)(o().mark((function e(t){var s,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(!0),e.prev=1,(s=(0,r.Z)({},t)).slug=v()(t.slug||t.title,{lower:!0}),s.status=Number(t.status),console.log(s),a=(0,E.hJ)(P.db,"posts"),e.next=9,(0,E.ET)(a,(0,r.Z)((0,r.Z)({},s),{},{image:U,imageName:z,content:n,createdAt:(0,E.Bt)()}));case 9:A.Am.success("Create new Posts successfully!!"),W("/my-post"),L({title:"",slug:"",status:2,category:{},user:{},hot:!1,image:"",content:""}),q(""),B(0),ae({}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),oe(!1);case 20:return e.prev=20,oe(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[1,17,20,23]])})));return function(t){return e.apply(this,arguments)}}(),Y=(0,u.useState)([]),$=(0,c.Z)(Y,2),ee=$[0],te=$[1],se=(0,u.useState)(""),ne=(0,c.Z)(se,2),re=ne[0],ae=ne[1],ce=(0,u.useState)(!1),ie=(0,c.Z)(ce,2),le=ie[0],oe=ie[1],ue=(0,u.useMemo)((function(){return{toolbar:[["bold","italic","underline","strike"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{header:[1,2,3,4,5,6,!1]}],["link","image"]]}}),[]);(0,u.useEffect)((function(){function e(){return(e=(0,a.Z)(o().mark((function e(){var t,s,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,E.hJ)(P.db,"categories"),s=(0,E.IO)(t,(0,E.ar)("status","==",1)),e.next=4,(0,E.PL)(s);case 4:n=e.sent,a=[],n.forEach((function(e){a.push((0,r.Z)({id:e.id},e.data()))})),te(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}));var de=function(){var e=(0,a.Z)(o().mark((function e(t){var s,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,E.JU)(P.db,"categories",t.id),e.next=3,(0,E.QT)(s);case 3:n=e.sent,J("category",(0,r.Z)({id:n.id},n.data())),ae(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){document.title="Monkey - Add new Posts"})),(0,R.jsxs)(T,{children:[(0,R.jsx)("h1",{className:"dashboard-heading",children:"Add new post"}),(0,R.jsxs)("form",{action:"",onSubmit:V(X),children:[(0,R.jsxs)("div",{className:"grid grid-cols-1 gap-x-10 mb-10 items-start md:grid-cols-2 md:gap-x-10 md:mb-10 md:items-start ",children:[(0,R.jsxs)(m.Z,{children:[(0,R.jsx)(h.Z,{children:"Title"}),(0,R.jsx)(x.Z,{control:d,placeholder:"Enter your title",name:"title"})]}),(0,R.jsxs)(m.Z,{children:[(0,R.jsx)(h.Z,{children:"Slug"}),(0,R.jsx)(x.Z,{control:d,placeholder:"Enter your slug",name:"slug"})]})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 gap-x-10 mb-10 items-start md:grid-cols-2 md:gap-x-10 md:mb-10 md:items-start",children:[(0,R.jsxs)(m.Z,{children:[(0,R.jsx)(h.Z,{children:"Image"}),(0,R.jsx)(k.Z,{onChange:M,className:"h-[250px]",handleDeleteImage:F,progress:Q,image:U})]}),(0,R.jsxs)(m.Z,{children:[(0,R.jsx)(h.Z,{children:"Category"}),(0,R.jsxs)(g.Z,{children:[(0,R.jsx)(C.Z,{placeholder:re.name||"Select the category"}),(0,R.jsx)(I.Z,{children:ee.length>0&&ee.map((function(e){return(0,R.jsx)(Z.Z,{onClick:function(){return de(e)},children:e.name},e.name)}))})]})]})]}),(0,R.jsxs)("div",{className:"mb-10 entry-content",children:[(0,R.jsx)(h.Z,{children:"Content"}),(0,R.jsx)("div",{className:"mt-4",children:(0,R.jsx)(_(),{modules:ue,theme:"snow",value:n,onChange:i,className:"w-full max-w-[350px] md:max-w-[760px] lg:max-w-full "})})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 gap-x-10 mb-10 items-start md:grid-cols-2 md:gap-x-10 md:mb-10 md:items-start",children:[(0,R.jsxs)(m.Z,{children:[(0,R.jsx)(h.Z,{children:"Feature Post"}),(0,R.jsx)(N.Z,{on:!0===K,onClick:function(){return J("hot",!K)}})]}),(0,R.jsxs)(m.Z,{children:[(0,R.jsx)(h.Z,{children:"Status"}),(0,R.jsxs)("div",{className:"flex items-center gap-x-5",children:[(0,R.jsx)(p.Z,{name:"status",control:d,checked:Number(H)===w.cf.APPROVED,value:w.cf.APPROVED,children:"Approved"}),(0,R.jsx)(p.Z,{name:"status",control:d,checked:Number(H)===w.cf.PENDING,value:w.cf.PENDING,children:"Pending"}),(0,R.jsx)(p.Z,{name:"status",control:d,checked:Number(H)===w.cf.REJECTED,value:w.cf.REJECTED,children:"Reject"})]})]})]}),(0,R.jsx)("div",{className:"flex mr-14",children:(0,R.jsx)(f.Z,{type:"submit",className:"mx-auto w-[200px]",isLoading:le,disable:le,children:"Add new post"})})]})]})}}}]);
//# sourceMappingURL=472.6ba6dc48.chunk.js.map