"use strict";(self.webpackChunkreact_monkey_blogging_boilerplate=self.webpackChunkreact_monkey_blogging_boilerplate||[]).push([[44],{8322:function(e,t,s){s(2791);var n=s(184);t.Z=function(e){var t=e.title,s=void 0===t?"":t,r=e.desc,a=void 0===r?"":r,i=e.children;return(0,n.jsxs)("div",{className:"mb-4 flex items-start justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"dashboard-heading",children:s}),(0,n.jsx)("p",{className:"dashboard-short-desc",children:a})]}),i]})}},7134:function(e,t,s){s.r(t);var n=s(1413),r=s(5861),a=s(9439),i=s(7757),c=s.n(i),l=s(2791),u=s(8322),o=s(6356),d=s(3453),m=s(9248),h=s(6024),p=s(5727),f=s(4170),x=s(5421),g=(s(4961),s(8119),s(460)),Z=s(1134),v=(s(3585),s(3504)),b=s(6871),j=s(9062),w=s(1199),y=s(333),k=s.n(y),N=s(577),S=s(3031),C=s(4490),E=s(6770),U=s.n(E),I=(s(6009),s(184));t.default=function(){var e=(0,Z.cI)({mode:"onChange",defaultValues:{}}),t=e.control,s=e.handleSubmit,i=(e.watch,e.reset),y=e.setValue,E=e.getValues,J=e.formState,_=(J.isSubmitting,J.isValid),P=(0,v.lr)(),M=(0,a.Z)(P,1)[0].get("id"),T=(0,l.useState)([]),V=(0,a.Z)(T,2),Q=V[0],q=V[1],A=(0,l.useState)(""),B=(0,a.Z)(A,2),D=(B[0],B[1]),L=(0,l.useState)(""),z=(0,a.Z)(L,2),F=z[0],G=z[1],H=(0,l.useState)(!1),K=(0,a.Z)(H,2),O=K[0],R=K[1],W=(0,l.useState)(""),X=(0,a.Z)(W,2),Y=X[0],$=X[1],ee=(0,b.s0)(),te=E("image"),se=function(){var e=(0,r.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,j.JU)(w.db,"posts",M),e.next=3,(0,j.r7)(t,{image:"",imageName:""});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=(0,C.Z)(y,E,se),re=ne.handleSelectImage,ae=ne.setImage,ie=ne.setProgress,ce=ne.handleDeleteImage,le=ne.progress,ue=ne.image,oe=ne.imageName;(0,l.useEffect)((function(){ae(te)}),[te,ae]),(0,l.useEffect)((function(){function e(){return(e=(0,r.Z)(c().mark((function e(){var t,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,j.JU)(w.db,"posts",M),e.next=3,(0,j.QT)(t);case 3:s=e.sent,i(s.data());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[M,i]),(0,l.useEffect)((function(){function e(){return(e=(0,r.Z)(c().mark((function e(){var t,s,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,j.hJ)(w.db,"categories"),e.next=3,(0,j.PL)(t);case 3:s=e.sent,r=[],s.forEach((function(e){r.push((0,n.Z)({id:e.id},e.data()))})),q(r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()})),(0,l.useEffect)((function(){function e(){return(e=(0,r.Z)(c().mark((function e(){var t,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,j.JU)(w.db,"posts",M),e.next=3,(0,j.QT)(t);case 3:s=e.sent,G(s.data().category.name),$(s.data().content||"");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[M]);var de=function(){var e=(0,r.Z)(c().mark((function e(t){var s,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,j.JU)(w.db,"categories",t.id),e.next=3,(0,j.QT)(s);case 3:r=e.sent,console.log(r.data().name),y("category",(0,n.Z)({},r.data())),G(r.data().name);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=(0,l.useMemo)((function(){return{toolbar:[["bold","italic","underline","strike"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{header:[1,2,3,4,5,6,!1]}],["link","image"]]}}),[]);if(!M||M.title)return null;var he=function(){var e=(0,r.Z)(c().mark((function e(t){var s,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=2;break}return e.abrupt("return");case 2:return R(!0),e.prev=3,(s=(0,n.Z)({},t)).slug=k()(t.slug||t.title,{lower:!0}),s.status=Number(t.status),r=(0,j.JU)(w.db,"posts",M),e.next=10,(0,j.r7)(r,(0,n.Z)((0,n.Z)({},s),{},{image:ue,imageName:oe,content:Y,createdAt:(0,j.Bt)()}));case 10:ee("/dashboard"),N.Am.success("Create new Posts successfully!!"),i({title:"",slug:"",status:2,category:{},user:{},hot:!1,image:""}),ae(""),ie(0),D({}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),R(!1);case 21:return e.prev=21,R(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[3,18,21,24]])})));return function(t){return e.apply(this,arguments)}}();return(0,I.jsxs)("div",{children:[(0,I.jsx)(u.Z,{title:"Update My Posts",desc:"Manage my posts"}),(0,I.jsxs)("form",{action:"",onSubmit:s(he),children:[(0,I.jsxs)("div",{className:"grid grid-cols-1 gap-x-10 mb-10 items-start md:grid-cols-2 md:gap-x-10 md:mb-10 md:items-start",children:[(0,I.jsxs)(o.Z,{children:[(0,I.jsx)(d.Z,{children:"Title"}),(0,I.jsx)(m.Z,{control:t,placeholder:"Enter your title",name:"title",required:!0})]}),(0,I.jsxs)(o.Z,{children:[(0,I.jsx)(d.Z,{children:"Slug"}),(0,I.jsx)(m.Z,{control:t,placeholder:"Enter your slug",name:"slug"})]})]}),(0,I.jsxs)("div",{className:"grid grid-cols-1 gap-x-10 mb-10 items-start md:grid-cols-2 md:gap-x-10 md:mb-10 md:items-start",children:[(0,I.jsxs)(o.Z,{children:[(0,I.jsx)(d.Z,{children:"Image"}),(0,I.jsx)(S.Z,{onChange:re,className:"h-[250px]",handleDeleteImage:ce,progress:le,image:ue})]}),(0,I.jsxs)(o.Z,{children:[(0,I.jsx)(d.Z,{children:"Category"}),(0,I.jsxs)(h.Z,{children:[(0,I.jsx)(p.Z,{placeholder:F||"Select the category"}),(0,I.jsx)(f.Z,{children:Q.length>0&&Q.map((function(e){return(0,I.jsx)(x.Z,{onClick:function(){return de(e)},children:e.name},e.name)}))})]})]})]}),(0,I.jsxs)("div",{className:"mb-10 entry-content",children:[(0,I.jsx)(d.Z,{children:"Content"}),(0,I.jsx)("div",{className:"mt-4",children:(0,I.jsx)(U(),{modules:me,theme:"snow",value:Y,onChange:$,className:"w-full max-w-[350px] md:max-w-[760px] lg:max-w-full "})})]}),(0,I.jsxs)("div",{className:"gap-x-5 flex justify-center",children:[(0,I.jsx)("div",{children:(0,I.jsx)(g.Z,{type:"submit",className:"mx-auto w-[200px]",isLoading:O,disable:O,children:"Update My Post"})}),(0,I.jsx)("div",{children:(0,I.jsx)(g.Z,{to:"/my-post",className:"mx-auto w-[100px] sm:w-[200px] md:w-[200px] lg:w-[200px]  ",kind:"ghost",type:"submit",children:"Back"})})]})]})]})}}}]);
//# sourceMappingURL=44.d93f34cc.chunk.js.map